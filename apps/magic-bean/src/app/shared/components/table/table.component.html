<ng-template #content>
	<ng-content select=".expandable-content"></ng-content>
</ng-template>
<mat-form-field>
	<input #filterInput
			 matInput
			 placeholder="Filter">
</mat-form-field>
<div class="table-container">
	<div class="example-loading-shade"
		  *ngIf="isLoadingResults">
		<mat-spinner *ngIf="isLoadingResults"></mat-spinner>
	</div>
	<mat-table *ngIf="dataSource && columns"
				  [dataSource]="dataSRC"
				  class="custom-table"
				  matSort
				  multiTemplateDataRows
				  (matSortChange)="sortColumn($event)">

		<ng-container *ngFor="let column of columns"
						  [matColumnDef]="column.id">
			<mat-header-cell *matHeaderCellDef
								  mat-sort-header
								  sticky
								  class="custom-table-header"
								  (click)="sendAction('table-header', column.id)">{{column.name}}</mat-header-cell>
			<mat-cell *matCellDef="let col"
						 class="custom-table-cell"
						 (click)="sendAction('table-col', column.id)">
				<span class="custom-table-cell-span">{{col[column.id]}}</span>
			</mat-cell>
		</ng-container>

		<!-- Star Column -->
		<ng-container matColumnDef="star"
						  stickyEnd>
			<mat-header-cell *matHeaderCellDef></mat-header-cell>
			<mat-cell *matCellDef="let element">
				<button mat-icon-button
						  [matMenuTriggerFor]="menu"
						  aria-label="Example icon-button with a menu">
					<mat-icon>more_vert</mat-icon>
				</button>
				<mat-menu #menu="matMenu">
					<button mat-menu-item
							  *ngFor="let actionItem of actionItems"
							  (click)="sendAction(actionItem.type, element)">
						<mat-icon [color]="actionItem.color">{{actionItem.icon}}</mat-icon>
						<span>{{actionItem.label}}</span>
					</button>
				</mat-menu>

			</mat-cell>
		</ng-container>

		<!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
		<ng-container matColumnDef="expandedDetail">
			<mat-cell *matCellDef="let row"
						 [attr.colspan]="columnIDs.length">
				<div class="example-element-detail"
					  [@detailExpand]="row == expandedElement ? 'expanded' : 'collapsed'">
					<ng-container *ngTemplateOutlet="expandableContentTmpl, context: {$implicit: row}"></ng-container>
				</div>
			</mat-cell>
		</ng-container>

		<mat-header-row *matHeaderRowDef="columnIDs; sticky: true"></mat-header-row>
		<mat-row *matRowDef="let row; columns: columnIDs;"
					(click)="sendAction('table-row', row)"
					class="example-element-row"
					[class.example-expanded-row]="expandedElement === row"></mat-row>
		<mat-row *matRowDef="let row; columns: ['expandedDetail']"
					class="example-detail-row"></mat-row>
	</mat-table>

	<mat-paginator [length]="resultsLength"
						[pageSizeOptions]="[5, 10, 20]"
						showFirstLastButtons></mat-paginator>
</div>